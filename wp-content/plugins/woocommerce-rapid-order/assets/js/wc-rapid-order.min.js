jQuery(function(t){function e(){var e={top:0,bottom:0};""!=wcro.fixed_header_class&&t(wcro.fixed_header_class).length&&(e.top+=t(wcro.fixed_header_class).outerHeight()),t(".admin-bar").length&&(e.top+=t("#wpadminbar").outerHeight()),t(".demo_store").length&&(e.bottom=t(".demo_store").outerHeight()),t(".wcro-products").stickyHeaderFooter(e)}if(Product=Backbone.Model.extend({defaults:{updating:!1}}),Products=Backbone.Collection.extend({parse:function(t){return this.url=t.next_page,t.products},model:Product}),ProductView=Backbone.View.extend({tagName:"tr",className:"wcro-item",isUpdating:!1,events:{"change input[name='quantity']":"updateQuantity","wcro-enter input[name='quantity']":"updateQuantity","keydown .cart":"updateOnEnter","change input[name='wcro-sub-box']":"updateSub"},initialize:function(){this.$el.attr("id","wcro_item_"+this.model.get("id")),this.model.get("in_stock")||this.$el.addClass("wcro_no_stock"),this.template=_.template(t("#productTemplate").html()),this.model.set("original_price",this.model.get("price"))},render:function(){var t=_.extend(this.model.attributes,{totalPrice:this.totalPrice()});return this.$el.html(this.template(t)),this.model.get("featured")&&this.$el.addClass("wcro_featured"),this.model.get("on_sale")&&this.$el.addClass("wcro_sale"),"yes"==this.$el.find('input[name="wcro-sub"]').val()&&this.$el.find('input[name="wcro-sub-box"]').prop("checked",!0),this},updating:function(t){this.isUpdating=t,t?this.$el.find(".wcro-item-loader").fadeIn():this.$el.find(".wcro-item-loader").hide()},updateOnEnter:function(t){13==t.keyCode&&(t.preventDefault(),this.updateQuantity(t))},updateQuantity:function(e){this.updatePrice(this.calculatePrice(t(e.currentTarget).val()));var i=this;this.updating(!0),clearTimeout(this.timeout),this.$el.find(".wcro-item-loader").fadeIn(),this.timeout=setTimeout(function(){var o=i.model.get("cart_item_hash"),n=t(e.currentTarget),s=parseFloat(n.val());isNaN(s)&&(s=0);var r=n.closest("form");if(o){var a={cart_item_key:o,quantity:s,update_cart:!0};t.ajax({url:wcro.wc_ajax_url.replace("%%endpoint%%","wcro_update_cart"),method:"POST",data:a}).success(function(t){i.cartUpdated(t),s<=0&&i.model.set("cart_item_hash",""),i.discountMessage(t.discount)}).done(function(){i.updateCartFragment()})}else s>0?t.ajax({url:wcro.wc_ajax_url.replace("%%endpoint%%","wcro_add_to_cart"),method:"POST",data:r.serialize()}).success(function(t){i.model.set("cart_item_hash",t.cart_item_hash),i.cartUpdated(t),i.discountMessage(t.discount)}).done(function(){i.updateCartFragment()}):i.$el.find(".wcro-item-loader").hide()},550)},updateSub:function(e){var i=this,o=this.model.get("cart_item_hash"),n=t(e.currentTarget).prop("checked")?"yes":"no";if(this.$el.find('input[name="wcro-sub"]').val(n),this.$el.find(".wcro-item-loader").fadeIn(),o){var s={cart_item_key:o,quantity:0,update_cart:!0};t.ajax({url:wcro.wc_ajax_url.replace("%%endpoint%%","wcro_update_cart"),method:"POST",data:s}).success(function(e){i.model.set("cart_item_hash",e.cart_item_hash),t.ajax({url:wcro.wc_ajax_url.replace("%%endpoint%%","wcro_add_to_cart"),method:"POST",data:i.$el.find(".cart").serialize()}).success(function(t){i.model.set("cart_item_hash",t.cart_item_hash),i.cartUpdated(t)}).done(function(){i.updateCartFragment()})})}else this.$el.find(".wcro-item-loader").hide()},cartUpdated:function(t){t.total&&this.updatePrice(t.total),t.price&&this.model.set("price",t.price),this.$el.find(".wcro_total .wcro-cart-action").fadeIn().delay(200).fadeOut("slow")},discountMessage:function(t){t>0?(this.$el.find(".wcro_total .wcro-cart-discount").html("Saved "+wcro.currency_symbol+t),this.$el.find(".wcro_total .wcro-cart-discount").show()):this.$el.find(".wcro_total .wcro-cart-discount").hide()},calculatePrice:function(t){var e=this;_.each(this.model.get("price_adjusters"),function(i){window.hasOwnProperty(i)&&e.model.set("price",window[i](e.model.get("original_price"),e.model.get("price"),t))});var i=parseFloat(t*this.model.get("price"));return!i||isNaN(i)?0:i.toFixed(wcro.currency_format_num_decimals)},updatePrice:function(t){t=parseFloat(t).toFixed(wcro.currency_format_num_decimals);var e=this.formatTotalPrice(t);this.$el.find(".wcro_total_price").html(e)},totalPrice:function(){var t=this.model.get("cart_item_total");return 0!=t&&t?this.formatTotalPrice(parseFloat(t).toFixed(wcro.currency_format_num_decimals)):""},formatTotalPrice:function(t){return accounting.formatMoney(t,{symbol:wcro.currency_format_symbol,decimal:wcro.currency_format_decimal_sep,thousand:wcro.currency_format_thousand_sep,precision:wcro.currency_format_num_decimals,format:wcro.currency_format})},updateCartFragment:function(){this.updating(!1),t.ajax({url:wc_cart_fragments_params.wc_ajax_url.toString().replace("%%endpoint%%","get_refreshed_fragments"),type:"POST",success:function(e){e&&e.fragments&&(t.each(e.fragments,function(e,i){t(e).replaceWith(i)}),t(document.body).trigger("wc_fragments_refreshed"))}})}}),ProductListView=Backbone.View.extend({el:".wcro-products",events:{'input input[type="search"]':"liveSearch"},liveSearch:function(e){var i=this;clearTimeout(this.timeout),this.timeout=setTimeout(function(){i.displayingSearch||(i.prevData={next_page:i.collection.url,products:i.collection.models});var o=t(e.currentTarget).val();o.length>2?t.get(wcro.base_path,{post_type:"product",s:o,"wcro-ajax":1},function(t){i.collection.reset(t,{parse:!0}),i.displayingSearch=!0}):(i.displayingSearch&&i.collection.reset(i.prevData,{parse:!0}),i.displayingSearch=!1)},150)},initialize:function(){_.bindAll(this,"checkScroll"),t(window).scroll(this.checkScroll),this.$loader=t("#wcro-loader"),this.render(),this.listenTo(this.collection,"add",this.addOne),this.listenTo(this.collection,"reset",this.reset),this.isLoading=!1,this.displayingSearch=!1},render:function(){this.collection.forEach(this.addOne,this)},reset:function(){this.$el.find("tr.wcro-item").remove(),this.render()},addOne:function(e){this.$loader.hide();var i=this;if("variable"==e.get("type"))_.each(e.get("variations"),function(t){i.collection.add(t)});else{var o=new ProductView({model:e});this.$loader.before(o.render().el)}"function"==typeof wcqib_refresh_quantity_increments&&wcqib_refresh_quantity_increments(),t(".wcro-swipebox").swipebox({hideCloseButtonOnMobile:!1,loopAtEnd:!0})},checkScroll:function(){var e=this,i=300,o=this.$el.position().top+this.el.clientHeight-i;!this.isLoading&&this.collection.url&&t(window).scrollTop()+window.innerHeight>o&&(this.isLoading=!0,this.$loader.show(),this.collection.fetch({success:function(t){e.isLoading=!1,e.$loader.hide()},remove:!1}))}}),ProductsFooterView=Backbone.View.extend(),"undefined"!=typeof WCRO_Items){t(".woocommerce-pagination").hide();var i=new Products;new ProductListView({collection:i});i.url=WCRO_Items.next_page,i.add(WCRO_Items.products)}t(".tooltip").tooltipster({maxWidth:200,theme:"tooltipster-light",position:"bottom"}),"yes"==wcro.stick_table&&e(),t('.wcro-products .woocommerce-product-search input[type="search"]').attr("autocomplete","off"),t(document).on("keyup","input.qty",function(e){13==e.keyCode&&t(this).trigger("wcro-enter")})}),function(t,e,i,o){"use strict";function n(i,o){this.element=i,this.settings=t.extend({},r,o),this.bodyElement=t(this.settings.bodySelector,this.element)[0],this.footerElement=t(this.settings.footerSelector,this.element)[0],this.headerElement=t(this.settings.headerSelector,this.element)[0],this.isTable="table"===this.element.tagName.toLowerCase(),this.isVisible=function(){var t=this.element.getBoundingClientRect();return t.top<e.innerHeight&&t.bottom>0},this._defaults=r,this._name=s,this._scrollHandler=null,this.init()}var s="stickyHeaderFooter",r={bodySelector:"tbody",footerSelector:"tfoot",headerSelector:"thead",top:"0",bottom:"0"},a={outerWrapper:"sticky-header-footer_wrapper",innerWrapper:"sticky-header-footer_sticky-wrapper",innerWrapperHead:"sticky-header-footer_sticky-header",innerWrapperFoot:"sticky-header-footer_sticky-footer"},l=function(t,e){var i=t.parentNode,o=t.nextSibling===e?t:t.nextSibling;e.parentNode.insertBefore(t,e),i.insertBefore(e,o)},d=function(t,e,i){e||(e=250);var o,n;return function(){var s=i||this,r=+new Date,a=arguments;o&&r<o+e?(clearTimeout(n),n=setTimeout(function(){o=r,t.apply(s,a)},e)):(o=r,t.apply(s,a))}};t.extend(n.prototype,{init:function(){t(this.element).wrap('<div class="'+a.outerWrapper+'"></div>'),(this.footerElement||this.headerElement)&&(this.footerElement&&(this.setupHeaderFooter(!0),this.footerElement.isFooter=!0),this.headerElement&&this.setupHeaderFooter(),this._scrollHandler=d(this.watchHeaderFooter.bind(this),40),e.addEventListener("scroll",this._scrollHandler))},setupHeaderFooter:function(i){var o=i?"insertAfter":"insertBefore",n=i?"footerElement":"headerElement",s=[a.innerWrapper,i?a.innerWrapperFoot:a.innerWrapperHead];this[n].stickyClone=t(this[n]).clone(!1).wrap(t("<div></div>").css({bottom:i?this.settings.bottom:"auto",position:"fixed",top:i?"auto":this.settings.top,"z-index":1e3}).addClass(s.join(" "))).wrap(function(){var e=this.element.getAttribute("class");return this.isTable?t("<table></table>").addClass(e):""}.bind(this)).parents("."+a.innerWrapper).css("display","none")[o](this.element)[0];var r=this;t(e).resize(function(){t(r[n].stickyClone).width(t(r.element).parent().width())})},stick:function(e){var i=this.settings,o=e.isFooter?i.footerSelector:i.headerSelector,n=t(e).parents(".sticky-header-footer_wrapper:first").width()+"px";l(e,e.stickyClone.querySelector(o)),e.isStuck=!0,e.stickyClone.style.display="block",e.stickyClone.style.width=n},unstick:function(t){var e=this.settings,i=t.isFooter?e.footerSelector:e.headerSelector;l(t,this.element.querySelector(i)),t.isStuck=!1,t.stickyClone.style.display="none"},watchFooter:function(t){var i=this.bodyElement.getBoundingClientRect(),o=parseInt(this.settings.bottom,10),n=t.getBoundingClientRect(),s=e.innerHeight;t.isStuck?(i.bottom<s-o-n.height||i.top>s-o||!this.isVisible())&&this.unstick.call(this,t):i.bottom>s-o-n.height&&i.top<s-o&&this.isVisible()&&this.stick.call(this,t)},watchHeader:function(t){var e=this.bodyElement.getBoundingClientRect(),i=parseInt(this.settings.top,10),o=t.getBoundingClientRect();t.isStuck?(e.top>i+o.height||e.bottom<i+o.height/2)&&this.unstick.call(this,t):e.top<=i+o.height&&e.bottom>i+o.height&&this.stick.call(this,t)},watchHeaderFooter:function(){this.footerElement&&this.watchFooter(this.footerElement),this.headerElement&&this.watchHeader(this.headerElement)},tearDown:function(){e.removeEventListener("scroll",this._scrollHandler)}}),t.fn[s]=function(e){return this.each(function(){t.data(this,"plugin_"+s)||t.data(this,"plugin_"+s,new n(this,e))})}}(jQuery,window,document),function(){var t=function(e,i){function o(){this.q=[],this.add=function(t){this.q.push(t)};var t,e;this.call=function(){for(t=0,e=this.q.length;t<e;t++)this.q[t].call()}}function n(t,e){return t.currentStyle?t.currentStyle[e]:window.getComputedStyle?window.getComputedStyle(t,null).getPropertyValue(e):t.style[e]}function s(t,e){if(t.resizedAttached){if(t.resizedAttached)return void t.resizedAttached.add(e)}else t.resizedAttached=new o,t.resizedAttached.add(e);t.resizeSensor=document.createElement("div"),t.resizeSensor.className="resize-sensor";var i="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden;",s="position: absolute; left: 0; top: 0; transition: 0s;";t.resizeSensor.style.cssText=i,t.resizeSensor.innerHTML='<div class="resize-sensor-expand" style="'+i+'"><div style="'+s+'"></div></div><div class="resize-sensor-shrink" style="'+i+'"><div style="'+s+' width: 200%; height: 200%"></div></div>',t.appendChild(t.resizeSensor),{fixed:1,absolute:1}[n(t,"position")]||(t.style.position="relative");var r,a,l=t.resizeSensor.childNodes[0],d=l.childNodes[0],c=t.resizeSensor.childNodes[1],p=(c.childNodes[0],function(){d.style.width=l.offsetWidth+10+"px",d.style.height=l.offsetHeight+10+"px",l.scrollLeft=l.scrollWidth,l.scrollTop=l.scrollHeight,c.scrollLeft=c.scrollWidth,c.scrollTop=c.scrollHeight,r=t.offsetWidth,a=t.offsetHeight});p();var h=function(){t.resizedAttached&&t.resizedAttached.call()},u=function(t,e,i){t.attachEvent?t.attachEvent("on"+e,i):t.addEventListener(e,i)},f=function(){t.offsetWidth==r&&t.offsetHeight==a||h(),p()};u(l,"scroll",f),u(c,"scroll",f)}var r=Object.prototype.toString.call(e),a="[object Array]"===r||"[object NodeList]"===r||"[object HTMLCollection]"===r||"undefined"!=typeof jQuery&&e instanceof jQuery||"undefined"!=typeof Elements&&e instanceof Elements;if(a)for(var l=0,d=e.length;l<d;l++)s(e[l],i);else s(e,i);this.detach=function(){if(a)for(var i=0,o=e.length;i<o;i++)t.detach(e[i]);else t.detach(e)}};t.detach=function(t){t.resizeSensor&&(t.removeChild(t.resizeSensor),delete t.resizeSensor,delete t.resizedAttached)},"undefined"!=typeof module&&"undefined"!=typeof module.exports?module.exports=t:window.ResizeSensor=t}(),function(){var t=window.ResizeSensor;"undefined"!=typeof module&&"undefined"!=typeof module.exports&&(t=require("./ResizeSensor"));var e=this.ElementQueries=function(){function i(t){t||(t=document.documentElement);var e=getComputedStyle(t,"fontSize");return parseFloat(e)||16}function o(t,e){var o=e.replace(/[0-9]*/,"");switch(e=parseFloat(e),o){case"px":return e;case"em":return e*i(t);case"rem":return e*i();case"vw":return e*document.documentElement.clientWidth/100;case"vh":return e*document.documentElement.clientHeight/100;case"vmin":case"vmax":var n=document.documentElement.clientWidth/100,s=document.documentElement.clientHeight/100,r=Math["vmin"===o?"min":"max"];return e*r(n,s);default:return e}}function n(t){this.element=t,this.options={};var e,i,n,s,r,a,l,d=0,c=0;this.addOption=function(t){var e=[t.mode,t.property,t.value].join(",");this.options[e]=t};var p=["min-width","min-height","max-width","max-height"];this.call=function(){d=this.element.offsetWidth,c=this.element.offsetHeight,r={};for(e in this.options)this.options.hasOwnProperty(e)&&(i=this.options[e],n=o(this.element,i.value),s="width"==i.property?d:c,l=i.mode+"-"+i.property,a="","min"==i.mode&&s>=n&&(a+=i.value),"max"==i.mode&&s<=n&&(a+=i.value),r[l]||(r[l]=""),a&&-1===(" "+r[l]+" ").indexOf(" "+a+" ")&&(r[l]+=" "+a));for(var t in p)p.hasOwnProperty(t)&&(r[p[t]]?this.element.setAttribute(p[t],r[p[t]].substr(1)):this.element.removeAttribute(p[t]))}}function s(e,i){e.elementQueriesSetupInformation?e.elementQueriesSetupInformation.addOption(i):(e.elementQueriesSetupInformation=new n(e),e.elementQueriesSetupInformation.addOption(i),e.elementQueriesSensor=new t(e,function(){e.elementQueriesSetupInformation.call()})),e.elementQueriesSetupInformation.call(),u&&f.indexOf(e)<0&&f.push(e)}function r(t,e,i,o){"undefined"==typeof m[e]&&(m[e]={}),"undefined"==typeof m[e][i]&&(m[e][i]={}),"undefined"==typeof m[e][i][o]?m[e][i][o]=t:m[e][i][o]+=","+t}function a(){var t;if(document.querySelectorAll&&(t=document.querySelectorAll.bind(document)),t||"undefined"==typeof $$||(t=$$),t||"undefined"==typeof jQuery||(t=jQuery),!t)throw"No document.querySelectorAll, jQuery or Mootools's $$ found.";return t}function l(){var t=a();for(var e in m)if(m.hasOwnProperty(e))for(var i in m[e])if(m[e].hasOwnProperty(i))for(var o in m[e][i])if(m[e][i].hasOwnProperty(o))for(var n=t(m[e][i][o]),r=0,l=n.length;r<l;r++)s(n[r],{mode:e,property:i,value:o})}function d(e){function i(){var t,i=!1;for(t in o)o.hasOwnProperty(t)&&n[t].minWidth&&e.offsetWidth>n[t].minWidth&&(i=t);if(i||(i=r),a!=i)if(l[i])o[a].style.display="none",o[i].style.display="block",a=i;else{var d=new Image;d.onload=function(){o[i].src=s[i],o[a].style.display="none",o[i].style.display="block",l[i]=!0,a=i},d.src=s[i]}else o[i].src=s[i]}var o=[],n=[],s=[],r=0,a=-1,l=[];for(var d in e.children)if(e.children.hasOwnProperty(d)&&e.children[d].tagName&&"img"===e.children[d].tagName.toLowerCase()){o.push(e.children[d]);var c=e.children[d].getAttribute("min-width")||e.children[d].getAttribute("data-min-width"),p=e.children[d].getAttribute("data-src")||e.children[d].getAttribute("url");s.push(p);var h={minWidth:c};n.push(h),c?e.children[d].style.display="none":(r=o.length-1,e.children[d].style.display="block")}a=r,e.resizeSensor=new t(e,i),i(),u&&f.push(e)}function c(){for(var t=a(),e=t("[data-responsive-image],[responsive-image]"),i=0,o=e.length;i<o;i++)d(e[i])}function p(t){var e,i;for(t=t.replace(/'/g,'"');null!==(e=g.exec(t));)for(i=e[1]+e[3],attrs=e[2];null!==(attrMatch=w.exec(attrs));)r(i,attrMatch[1],attrMatch[2],attrMatch[3])}function h(t){var e="";if(t)if("string"==typeof t)t=t.toLowerCase(),-1===t.indexOf("min-width")&&-1===t.indexOf("max-width")||p(t);else for(var i=0,o=t.length;i<o;i++)1===t[i].type?(e=t[i].selectorText||t[i].cssText,-1!==e.indexOf("min-height")||-1!==e.indexOf("max-height")?p(e):-1===e.indexOf("min-width")&&-1===e.indexOf("max-width")||p(e)):4===t[i].type&&h(t[i].cssRules||t[i].rules)}var u=!1,f=[],m={},g=/,?[\s\t]*([^,\n]*?)((?:\[[\s\t]*?(?:min|max)-(?:width|height)[\s\t]*?[~$\^]?=[\s\t]*?"[^"]*?"[\s\t]*?])+)([^,\n\s\{]*)/gim,w=/\[[\s\t]*?(min|max)-(width|height)[\s\t]*?[~$\^]?=[\s\t]*?"([^"]*?)"[\s\t]*?]/gim,v=!1;this.init=function(t){u="undefined"!=typeof t&&t;for(var e=0,i=document.styleSheets.length;e<i;e++)try{h(document.styleSheets[e].cssRules||document.styleSheets[e].rules||document.styleSheets[e].cssText)}catch(o){if("SecurityError"!==o.name)throw o}if(!v){var n=document.createElement("style");n.type="text/css",n.innerHTML="[responsive-image] > img, [data-responsive-image] {overflow: hidden; padding: 0; } [responsive-image] > img, [data-responsive-image] > img { width: 100%;}",document.getElementsByTagName("head")[0].appendChild(n),v=!0}l(),c()},this.update=function(t){this.init(t)},this.detach=function(){if(!this.withTracking)throw"withTracking is not enabled. We can not detach elements since we don not store it.Use ElementQueries.withTracking = true; before domready or call ElementQueryes.update(true).";for(var t;t=f.pop();)e.detach(t);f=[]}};e.update=function(t){e.instance.update(t)},e.detach=function(t){t.elementQueriesSetupInformation?(t.elementQueriesSensor.detach(),delete t.elementQueriesSetupInformation,delete t.elementQueriesSensor):t.resizeSensor&&(t.resizeSensor.detach(),delete t.resizeSensor)},e.withTracking=!1,e.init=function(){e.instance||(e.instance=new e),e.instance.init(e.withTracking)};var i=function(t){if(document.addEventListener)document.addEventListener("DOMContentLoaded",t,!1);else if(/KHTML|WebKit|iCab/i.test(navigator.userAgent))var e=setInterval(function(){/loaded|complete/i.test(document.readyState)&&(t(),clearInterval(e))},10);else window.onload=t};e.listen=function(){i(e.init)},"undefined"!=typeof module&&"undefined"!=typeof module.exports?module.exports=e:(window.ElementQueries=e,e.listen())}(),function(t,e,i){function o(e,i){this.bodyOverflowX,this.callbacks={hide:[],show:[]},this.checkInterval=null,this.Content,this.$el=t(e),this.$elProxy,this.elProxyPosition,this.enabled=!0,this.options=t.extend({},l,i),this.mouseIsOverProxy=!1,this.namespace="tooltipster-"+Math.round(1e5*Math.random()),this.Status="hidden",this.timerHide=null,this.timerShow=null,this.$tooltip,this.options.iconTheme=this.options.iconTheme.replace(".",""),this.options.theme=this.options.theme.replace(".",""),this._init()}function n(e,i){var o=!0;return t.each(e,function(t,n){if("undefined"==typeof i[t]||e[t]!==i[t])return o=!1,!1}),o}function s(){return!c&&d}function r(){var t=i.body||i.documentElement,e=t.style,o="transition";if("string"==typeof e[o])return!0;v=["Moz","Webkit","Khtml","O","ms"],o=o.charAt(0).toUpperCase()+o.substr(1);for(var n=0;n<v.length;n++)if("string"==typeof e[v[n]+o])return!0;return!1}var a="tooltipster",l={animation:"fade",arrow:!0,arrowColor:"",autoClose:!0,content:null,contentAsHTML:!1,contentCloning:!0,debug:!0,delay:200,minWidth:0,maxWidth:null,functionInit:function(t,e){},functionBefore:function(t,e){e()},functionReady:function(t,e){},functionAfter:function(t){},hideOnClick:!1,icon:"(?)",iconCloning:!0,iconDesktop:!1,iconTouch:!1,iconTheme:"tooltipster-icon",interactive:!1,interactiveTolerance:350,multiple:!1,offsetX:0,offsetY:0,onlyOne:!1,position:"top",positionTracker:!1,positionTrackerCallback:function(t){"hover"==this.option("trigger")&&this.option("autoClose")&&this.hide()},restoration:"current",speed:350,timer:0,theme:"tooltipster-default",touchDevices:!0,trigger:"hover",updateAnimation:!0};o.prototype={_init:function(){var e=this;if(i.querySelector){var o=null;void 0===e.$el.data("tooltipster-initialTitle")&&(o=e.$el.attr("title"),void 0===o&&(o=null),e.$el.data("tooltipster-initialTitle",o)),null!==e.options.content?e._content_set(e.options.content):e._content_set(o);var n=e.options.functionInit.call(e.$el,e.$el,e.Content);"undefined"!=typeof n&&e._content_set(n),e.$el.removeAttr("title").addClass("tooltipstered"),!d&&e.options.iconDesktop||d&&e.options.iconTouch?("string"==typeof e.options.icon?(e.$elProxy=t('<span class="'+e.options.iconTheme+'"></span>'),e.$elProxy.text(e.options.icon)):e.options.iconCloning?e.$elProxy=e.options.icon.clone(!0):e.$elProxy=e.options.icon,e.$elProxy.insertAfter(e.$el)):e.$elProxy=e.$el,"hover"==e.options.trigger?(e.$elProxy.on("mouseenter."+e.namespace,function(){s()&&!e.options.touchDevices||(e.mouseIsOverProxy=!0,e._show())}).on("mouseleave."+e.namespace,function(){s()&&!e.options.touchDevices||(e.mouseIsOverProxy=!1)}),d&&e.options.touchDevices&&e.$elProxy.on("touchstart."+e.namespace,function(){e._showNow()})):"click"==e.options.trigger&&e.$elProxy.on("click."+e.namespace,function(){s()&&!e.options.touchDevices||e._show()})}},_show:function(){var t=this;"shown"!=t.Status&&"appearing"!=t.Status&&(t.options.delay?t.timerShow=setTimeout(function(){("click"==t.options.trigger||"hover"==t.options.trigger&&t.mouseIsOverProxy)&&t._showNow()},t.options.delay):t._showNow())},_showNow:function(i){var o=this;o.options.functionBefore.call(o.$el,o.$el,function(){if(o.enabled&&null!==o.Content){i&&o.callbacks.show.push(i),o.callbacks.hide=[],clearTimeout(o.timerShow),o.timerShow=null,clearTimeout(o.timerHide),o.timerHide=null,o.options.onlyOne&&t(".tooltipstered").not(o.$el).each(function(e,i){var o=t(i),n=o.data("tooltipster-ns");t.each(n,function(t,e){var i=o.data(e),n=i.status(),s=i.option("autoClose");"hidden"!==n&&"disappearing"!==n&&s&&i.hide()})});var n=function(){o.Status="shown",t.each(o.callbacks.show,function(t,e){e.call(o.$el)}),o.callbacks.show=[]};if("hidden"!==o.Status){var s=0;"disappearing"===o.Status?(o.Status="appearing",r()?(o.$tooltip.clearQueue().removeClass("tooltipster-dying").addClass("tooltipster-"+o.options.animation+"-show"),o.options.speed>0&&o.$tooltip.delay(o.options.speed),o.$tooltip.queue(n)):o.$tooltip.stop().fadeIn(n)):"shown"===o.Status&&n()}else{o.Status="appearing";var s=o.options.speed;o.bodyOverflowX=t("body").css("overflow-x"),t("body").css("overflow-x","hidden");var a="tooltipster-"+o.options.animation,l="-webkit-transition-duration: "+o.options.speed+"ms; -webkit-animation-duration: "+o.options.speed+"ms; -moz-transition-duration: "+o.options.speed+"ms; -moz-animation-duration: "+o.options.speed+"ms; -o-transition-duration: "+o.options.speed+"ms; -o-animation-duration: "+o.options.speed+"ms; -ms-transition-duration: "+o.options.speed+"ms; -ms-animation-duration: "+o.options.speed+"ms; transition-duration: "+o.options.speed+"ms; animation-duration: "+o.options.speed+"ms;",c=o.options.minWidth?"min-width:"+Math.round(o.options.minWidth)+"px;":"",p=o.options.maxWidth?"max-width:"+Math.round(o.options.maxWidth)+"px;":"",h=o.options.interactive?"pointer-events: auto;":"";if(o.$tooltip=t('<div class="tooltipster-base '+o.options.theme+'" style="'+c+" "+p+" "+h+" "+l+'"><div class="tooltipster-content"></div></div>'),r()&&o.$tooltip.addClass(a),o._content_insert(),o.$tooltip.appendTo("body"),o.reposition(),o.options.functionReady.call(o.$el,o.$el,o.$tooltip),r()?(o.$tooltip.addClass(a+"-show"),o.options.speed>0&&o.$tooltip.delay(o.options.speed),o.$tooltip.queue(n)):o.$tooltip.css("display","none").fadeIn(o.options.speed,n),o._interval_set(),t(e).on("scroll."+o.namespace+" resize."+o.namespace,function(){o.reposition()}),o.options.autoClose)if(t("body").off("."+o.namespace),"hover"==o.options.trigger){if(d&&setTimeout(function(){t("body").on("touchstart."+o.namespace,function(){o.hide()})},0),o.options.interactive){d&&o.$tooltip.on("touchstart."+o.namespace,function(t){t.stopPropagation()});var u=null;o.$elProxy.add(o.$tooltip).on("mouseleave."+o.namespace+"-autoClose",function(){clearTimeout(u),u=setTimeout(function(){o.hide()},o.options.interactiveTolerance)}).on("mouseenter."+o.namespace+"-autoClose",function(){clearTimeout(u)})}else o.$elProxy.on("mouseleave."+o.namespace+"-autoClose",function(){o.hide()});o.options.hideOnClick&&o.$elProxy.on("click."+o.namespace+"-autoClose",function(){o.hide()})}else"click"==o.options.trigger&&(setTimeout(function(){t("body").on("click."+o.namespace+" touchstart."+o.namespace,function(){o.hide()})},0),o.options.interactive&&o.$tooltip.on("click."+o.namespace+" touchstart."+o.namespace,function(t){t.stopPropagation()}))}o.options.timer>0&&(o.timerHide=setTimeout(function(){o.timerHide=null,o.hide()},o.options.timer+s))}})},_interval_set:function(){var e=this;e.checkInterval=setInterval(function(){if(0===t("body").find(e.$el).length||0===t("body").find(e.$elProxy).length||"hidden"==e.Status||0===t("body").find(e.$tooltip).length)"shown"!=e.Status&&"appearing"!=e.Status||e.hide(),e._interval_cancel();else if(e.options.positionTracker){var i=e._repositionInfo(e.$elProxy),o=!1;n(i.dimension,e.elProxyPosition.dimension)&&("fixed"===e.$elProxy.css("position")?n(i.position,e.elProxyPosition.position)&&(o=!0):n(i.offset,e.elProxyPosition.offset)&&(o=!0)),o||(e.reposition(),e.options.positionTrackerCallback.call(e,e.$el))}},200)},_interval_cancel:function(){clearInterval(this.checkInterval),this.checkInterval=null},_content_set:function(t){"object"==typeof t&&null!==t&&this.options.contentCloning&&(t=t.clone(!0)),this.Content=t},_content_insert:function(){var t=this,e=this.$tooltip.find(".tooltipster-content");"string"!=typeof t.Content||t.options.contentAsHTML?e.empty().append(t.Content):e.text(t.Content)},_update:function(t){var e=this;e._content_set(t),null!==e.Content?"hidden"!==e.Status&&(e._content_insert(),e.reposition(),e.options.updateAnimation&&(r()?(e.$tooltip.css({width:"","-webkit-transition":"all "+e.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-moz-transition":"all "+e.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-o-transition":"all "+e.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-ms-transition":"all "+e.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms",transition:"all "+e.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms"}).addClass("tooltipster-content-changing"),setTimeout(function(){"hidden"!=e.Status&&(e.$tooltip.removeClass("tooltipster-content-changing"),setTimeout(function(){"hidden"!==e.Status&&e.$tooltip.css({"-webkit-transition":e.options.speed+"ms","-moz-transition":e.options.speed+"ms","-o-transition":e.options.speed+"ms","-ms-transition":e.options.speed+"ms",transition:e.options.speed+"ms"})},e.options.speed))},e.options.speed)):e.$tooltip.fadeTo(e.options.speed,.5,function(){"hidden"!=e.Status&&e.$tooltip.fadeTo(e.options.speed,1)}))):e.hide()},_repositionInfo:function(t){return{dimension:{height:t.outerHeight(!1),width:t.outerWidth(!1)},offset:t.offset(),position:{left:parseInt(t.css("left")),top:parseInt(t.css("top"))}}},hide:function(i){var o=this;i&&o.callbacks.hide.push(i),o.callbacks.show=[],clearTimeout(o.timerShow),o.timerShow=null,clearTimeout(o.timerHide),o.timerHide=null;var n=function(){t.each(o.callbacks.hide,function(t,e){e.call(o.$el)}),o.callbacks.hide=[]};if("shown"==o.Status||"appearing"==o.Status){o.Status="disappearing";var s=function(){o.Status="hidden","object"==typeof o.Content&&null!==o.Content&&o.Content.detach(),o.$tooltip.remove(),o.$tooltip=null,t(e).off("."+o.namespace),t("body").off("."+o.namespace).css("overflow-x",o.bodyOverflowX),t("body").off("."+o.namespace),o.$elProxy.off("."+o.namespace+"-autoClose"),o.options.functionAfter.call(o.$el,o.$el),n()};r()?(o.$tooltip.clearQueue().removeClass("tooltipster-"+o.options.animation+"-show").addClass("tooltipster-dying"),o.options.speed>0&&o.$tooltip.delay(o.options.speed),o.$tooltip.queue(s)):o.$tooltip.stop().fadeOut(o.options.speed,s)}else"hidden"==o.Status&&n();return o},show:function(t){return this._showNow(t),this},update:function(t){return this.content(t)},content:function(t){return"undefined"==typeof t?this.Content:(this._update(t),this)},reposition:function(){function i(){var i=t(e).scrollLeft();P-i<0&&(s=P-i,P=i),P+l-i>r&&(s=P-(r+i-l),P=r+i-l)}function o(i,o){a.offset.top-t(e).scrollTop()-d-E-12<0&&o.indexOf("top")>-1&&(z=i),a.offset.top+a.dimension.height+d+12+E>t(e).scrollTop()+t(e).height()&&o.indexOf("bottom")>-1&&(z=i,M=a.offset.top-d-E-12)}var n=this;if(0!==t("body").find(n.$tooltip).length){n.$tooltip.css("width",""),n.elProxyPosition=n._repositionInfo(n.$elProxy);var s=null,r=t(e).width(),a=n.elProxyPosition,l=n.$tooltip.outerWidth(!1),d=(n.$tooltip.innerWidth()+1,n.$tooltip.outerHeight(!1));if(n.$elProxy.is("area")){var c=n.$elProxy.attr("shape"),p=n.$elProxy.parent().attr("name"),h=t('img[usemap="#'+p+'"]'),u=h.offset().left,f=h.offset().top,m=void 0!==n.$elProxy.attr("coords")?n.$elProxy.attr("coords").split(","):void 0;if("circle"==c){var g=parseInt(m[0]),w=parseInt(m[1]),v=parseInt(m[2]);a.dimension.height=2*v,a.dimension.width=2*v,a.offset.top=f+w-v,a.offset.left=u+g-v}else if("rect"==c){var g=parseInt(m[0]),w=parseInt(m[1]),b=parseInt(m[2]),y=parseInt(m[3]);a.dimension.height=y-w,a.dimension.width=b-g,a.offset.top=f+w,a.offset.left=u+g}else if("poly"==c){for(var x=0,_=0,S=0,$=0,C="even",T=0;T<m.length;T++){var k=parseInt(m[T]);"even"==C?(k>S&&(S=k,0===T&&(x=S)),k<x&&(x=k),C="odd"):(k>$&&($=k,1==T&&(_=$)),k<_&&(_=k),C="even")}a.dimension.height=$-_,a.dimension.width=S-x,a.offset.top=f+_,a.offset.left=u+x}else a.dimension.height=h.outerHeight(!1),a.dimension.width=h.outerWidth(!1),a.offset.top=f,a.offset.left=u}var P=0,O=0,M=0,E=parseInt(n.options.offsetY),I=parseInt(n.options.offsetX),z=n.options.position;if("top"==z){var H=a.offset.left+l-(a.offset.left+a.dimension.width);P=a.offset.left+I-H/2,M=a.offset.top-d-E-12,i(),o("bottom","top")}if("top-left"==z&&(P=a.offset.left+I,M=a.offset.top-d-E-12,i(),o("bottom-left","top-left")),"top-right"==z&&(P=a.offset.left+a.dimension.width+I-l,M=a.offset.top-d-E-12,i(),o("bottom-right","top-right")),"bottom"==z){var H=a.offset.left+l-(a.offset.left+a.dimension.width);P=a.offset.left-H/2+I,M=a.offset.top+a.dimension.height+E+12,i(),o("top","bottom")}if("bottom-left"==z&&(P=a.offset.left+I,M=a.offset.top+a.dimension.height+E+12,i(),o("top-left","bottom-left")),"bottom-right"==z&&(P=a.offset.left+a.dimension.width+I-l,M=a.offset.top+a.dimension.height+E+12,i(),o("top-right","bottom-right")),"left"==z){P=a.offset.left-I-l-12,O=a.offset.left+I+a.dimension.width+12;var A=a.offset.top+d-(a.offset.top+a.dimension.height);if(M=a.offset.top-A/2-E,P<0&&O+l>r){var W=2*parseFloat(n.$tooltip.css("border-width")),B=l+P-W;n.$tooltip.css("width",B+"px"),d=n.$tooltip.outerHeight(!1),P=a.offset.left-I-B-12-W,A=a.offset.top+d-(a.offset.top+a.dimension.height),M=a.offset.top-A/2-E}else P<0&&(P=a.offset.left+I+a.dimension.width+12,s="left")}if("right"==z){P=a.offset.left+I+a.dimension.width+12,O=a.offset.left-I-l-12;var A=a.offset.top+d-(a.offset.top+a.dimension.height);if(M=a.offset.top-A/2-E,P+l>r&&O<0){var W=2*parseFloat(n.$tooltip.css("border-width")),B=r-P-W;n.$tooltip.css("width",B+"px"),d=n.$tooltip.outerHeight(!1),A=a.offset.top+d-(a.offset.top+a.dimension.height),M=a.offset.top-A/2-E}else P+l>r&&(P=a.offset.left-I-l-12,s="right")}if(n.options.arrow){var F="tooltipster-arrow-"+z;if(n.options.arrowColor.length<1)var q=n.$tooltip.css("background-color");else var q=n.options.arrowColor;
if(s?"left"==s?(F="tooltipster-arrow-right",s=""):"right"==s?(F="tooltipster-arrow-left",s=""):s="left:"+Math.round(s)+"px;":s="","top"==z||"top-left"==z||"top-right"==z)var D=parseFloat(n.$tooltip.css("border-bottom-width")),N=n.$tooltip.css("border-bottom-color");else if("bottom"==z||"bottom-left"==z||"bottom-right"==z)var D=parseFloat(n.$tooltip.css("border-top-width")),N=n.$tooltip.css("border-top-color");else if("left"==z)var D=parseFloat(n.$tooltip.css("border-right-width")),N=n.$tooltip.css("border-right-color");else if("right"==z)var D=parseFloat(n.$tooltip.css("border-left-width")),N=n.$tooltip.css("border-left-color");else var D=parseFloat(n.$tooltip.css("border-bottom-width")),N=n.$tooltip.css("border-bottom-color");D>1&&D++;var j="";if(0!==D){var L="",Q="border-color: "+N+";";F.indexOf("bottom")!==-1?L="margin-top: -"+Math.round(D)+"px;":F.indexOf("top")!==-1?L="margin-bottom: -"+Math.round(D)+"px;":F.indexOf("left")!==-1?L="margin-right: -"+Math.round(D)+"px;":F.indexOf("right")!==-1&&(L="margin-left: -"+Math.round(D)+"px;"),j='<span class="tooltipster-arrow-border" style="'+L+" "+Q+';"></span>'}n.$tooltip.find(".tooltipster-arrow").remove();var V='<div class="'+F+' tooltipster-arrow" style="'+s+'">'+j+'<span style="border-color:'+q+';"></span></div>';n.$tooltip.append(V)}n.$tooltip.css({top:Math.round(M)+"px",left:Math.round(P)+"px"})}return n},enable:function(){return this.enabled=!0,this},disable:function(){return this.hide(),this.enabled=!1,this},destroy:function(){var e=this;e.hide(),e.$el[0]!==e.$elProxy[0]&&e.$elProxy.remove(),e.$el.removeData(e.namespace).off("."+e.namespace);var i=e.$el.data("tooltipster-ns");if(1===i.length){var o=null;"previous"===e.options.restoration?o=e.$el.data("tooltipster-initialTitle"):"current"===e.options.restoration&&(o="string"==typeof e.Content?e.Content:t("<div></div>").append(e.Content).html()),o&&e.$el.attr("title",o),e.$el.removeClass("tooltipstered").removeData("tooltipster-ns").removeData("tooltipster-initialTitle")}else i=t.grep(i,function(t,i){return t!==e.namespace}),e.$el.data("tooltipster-ns",i);return e},elementIcon:function(){return this.$el[0]!==this.$elProxy[0]?this.$elProxy[0]:void 0},elementTooltip:function(){return this.$tooltip?this.$tooltip[0]:void 0},option:function(t,e){return"undefined"==typeof e?this.options[t]:(this.options[t]=e,this)},status:function(){return this.Status}},t.fn[a]=function(){var e=arguments;if(0===this.length){if("string"==typeof e[0]){var i=!0;switch(e[0]){case"setDefaults":t.extend(l,e[1]);break;default:i=!1}return!!i||this}return this}if("string"==typeof e[0]){var n="#*$~&";return this.each(function(){var i=t(this).data("tooltipster-ns"),o=i?t(this).data(i[0]):null;if(!o)throw new Error("You called Tooltipster's \""+e[0]+'" method on an uninitialized element');if("function"!=typeof o[e[0]])throw new Error('Unknown method .tooltipster("'+e[0]+'")');var s=o[e[0]](e[1],e[2]);if(s!==o)return n=s,!1}),"#*$~&"!==n?n:this}var s=[],r=e[0]&&"undefined"!=typeof e[0].multiple,a=r&&e[0].multiple||!r&&l.multiple,d=e[0]&&"undefined"!=typeof e[0].debug,c=d&&e[0].debug||!d&&l.debug;return this.each(function(){var i=!1,n=t(this).data("tooltipster-ns"),r=null;n?a?i=!0:c&&console.log('Tooltipster: one or more tooltips are already attached to this element: ignoring. Use the "multiple" option to attach more tooltips.'):i=!0,i&&(r=new o(this,e[0]),n||(n=[]),n.push(r.namespace),t(this).data("tooltipster-ns",n),t(this).data(r.namespace,r)),s.push(r)}),a?s:this};var d=!!("ontouchstart"in e),c=!1;t("body").one("mousemove",function(){c=!0})}(jQuery,window,document),function(t,e,i,o){i.swipebox=function(n,s){var r,a,l={useCSS:!0,useSVG:!0,initialIndexOnArray:0,removeBarsOnMobile:!0,hideCloseButtonOnMobile:!1,hideBarsDelay:3e3,videoMaxWidth:1140,vimeoColor:"cccccc",beforeOpen:null,afterOpen:null,afterClose:null,afterMedia:null,nextSlide:null,prevSlide:null,loopAtEnd:!1,autoplayVideos:!1,queryStringData:{},toggleClassOnLoad:""},d=this,c=[],p=n.selector,h=navigator.userAgent.match(/(iPad)|(iPhone)|(iPod)|(Android)|(PlayBook)|(BB10)|(BlackBerry)|(Opera Mini)|(IEMobile)|(webOS)|(MeeGo)/i),u=null!==h||e.createTouch!==o||"ontouchstart"in t||"onmsgesturechange"in t||navigator.msMaxTouchPoints,f=!!e.createElementNS&&!!e.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,m=t.innerWidth?t.innerWidth:i(t).width(),g=t.innerHeight?t.innerHeight:i(t).height(),w=0,v='<div id="swipebox-overlay">\t\t\t\t\t<div id="swipebox-container">\t\t\t\t\t\t<div id="swipebox-slider"></div>\t\t\t\t\t\t<div id="swipebox-top-bar">\t\t\t\t\t\t\t<div id="swipebox-title"></div>\t\t\t\t\t\t</div>\t\t\t\t\t\t<div id="swipebox-bottom-bar">\t\t\t\t\t\t\t<div id="swipebox-arrows">\t\t\t\t\t\t\t\t<a id="swipebox-prev"></a>\t\t\t\t\t\t\t\t<a id="swipebox-next"></a>\t\t\t\t\t\t\t</div>\t\t\t\t\t\t</div>\t\t\t\t\t\t<a id="swipebox-close"></a>\t\t\t\t\t</div>\t\t\t</div>';d.settings={},i.swipebox.close=function(){r.closeSlide()},i.swipebox.extend=function(){return r},d.init=function(){d.settings=i.extend({},l,s),i.isArray(n)?(c=n,r.target=i(t),r.init(d.settings.initialIndexOnArray)):i(e).on("click",p,function(t){if("slide current"===t.target.parentNode.className)return!1;i.isArray(n)||(r.destroy(),a=i(p),r.actions()),c=[];var e,o,s;s||(o="data-rel",s=i(this).attr(o)),s||(o="rel",s=i(this).attr(o)),a=s&&""!==s&&"nofollow"!==s?i(p).filter("["+o+'="'+s+'"]'):i(p),a.each(function(){var t=null,e=null;i(this).attr("title")&&(t=i(this).attr("title")),i(this).attr("href")&&(e=i(this).attr("href")),c.push({href:e,title:t})}),e=a.index(i(this)),t.preventDefault(),t.stopPropagation(),r.target=i(t.target),r.init(e)})},r={init:function(t){d.settings.beforeOpen&&d.settings.beforeOpen(),this.target.trigger("swipebox-start"),i.swipebox.isOpen=!0,this.build(),this.openSlide(t),this.openMedia(t),this.preloadMedia(t+1),this.preloadMedia(t-1),d.settings.afterOpen&&d.settings.afterOpen(t)},build:function(){var t,e=this;i("body").append(v),f&&d.settings.useSVG===!0&&(t=i("#swipebox-close").css("background-image"),t=t.replace("png","svg"),i("#swipebox-prev, #swipebox-next, #swipebox-close").css({"background-image":t})),h&&d.settings.removeBarsOnMobile&&i("#swipebox-bottom-bar, #swipebox-top-bar").remove(),i.each(c,function(){i("#swipebox-slider").append('<div class="slide"></div>')}),e.setDim(),e.actions(),u&&e.gesture(),e.keyboard(),e.animBars(),e.resize()},setDim:function(){var e,o,n={};"onorientationchange"in t?t.addEventListener("orientationchange",function(){0===t.orientation?(e=m,o=g):90!==t.orientation&&t.orientation!==-90||(e=g,o=m)},!1):(e=t.innerWidth?t.innerWidth:i(t).width(),o=t.innerHeight?t.innerHeight:i(t).height()),n={width:e,height:o},i("#swipebox-overlay").css(n)},resize:function(){var e=this;i(t).resize(function(){e.setDim()}).resize()},supportTransition:function(){var t,i="transition WebkitTransition MozTransition OTransition msTransition KhtmlTransition".split(" ");for(t=0;t<i.length;t++)if(e.createElement("div").style[i[t]]!==o)return i[t];return!1},doCssTrans:function(){if(d.settings.useCSS&&this.supportTransition())return!0},gesture:function(){var t,e,o,n,s,r,a=this,l=!1,d=!1,p=10,h=50,u={},f={},g=i("#swipebox-top-bar, #swipebox-bottom-bar"),v=i("#swipebox-slider");g.addClass("visible-bars"),a.setTimeout(),i("body").bind("touchstart",function(a){return i(this).addClass("touching"),t=i("#swipebox-slider .slide").index(i("#swipebox-slider .slide.current")),f=a.originalEvent.targetTouches[0],u.pageX=a.originalEvent.targetTouches[0].pageX,u.pageY=a.originalEvent.targetTouches[0].pageY,i("#swipebox-slider").css({"-webkit-transform":"translate3d("+w+"%, 0, 0)",transform:"translate3d("+w+"%, 0, 0)"}),i(".touching").bind("touchmove",function(a){if(a.preventDefault(),a.stopPropagation(),f=a.originalEvent.targetTouches[0],!d&&(s=o,o=f.pageY-u.pageY,Math.abs(o)>=h||l)){var g=.75-Math.abs(o)/v.height();v.css({top:o+"px"}),v.css({opacity:g}),l=!0}n=e,e=f.pageX-u.pageX,r=100*e/m,!d&&!l&&Math.abs(e)>=p&&(i("#swipebox-slider").css({"-webkit-transition":"",transition:""}),d=!0),d&&(0<e?0===t?i("#swipebox-overlay").addClass("leftSpringTouch"):(i("#swipebox-overlay").removeClass("leftSpringTouch").removeClass("rightSpringTouch"),i("#swipebox-slider").css({"-webkit-transform":"translate3d("+(w+r)+"%, 0, 0)",transform:"translate3d("+(w+r)+"%, 0, 0)"})):0>e&&(c.length===t+1?i("#swipebox-overlay").addClass("rightSpringTouch"):(i("#swipebox-overlay").removeClass("leftSpringTouch").removeClass("rightSpringTouch"),i("#swipebox-slider").css({"-webkit-transform":"translate3d("+(w+r)+"%, 0, 0)",transform:"translate3d("+(w+r)+"%, 0, 0)"}))))}),!1}).bind("touchend",function(t){if(t.preventDefault(),t.stopPropagation(),i("#swipebox-slider").css({"-webkit-transition":"-webkit-transform 0.4s ease",transition:"transform 0.4s ease"}),o=f.pageY-u.pageY,e=f.pageX-u.pageX,r=100*e/m,l)if(l=!1,Math.abs(o)>=2*h&&Math.abs(o)>Math.abs(s)){var c=o>0?v.height():-v.height();v.animate({top:c+"px",opacity:0},300,function(){a.closeSlide()})}else v.animate({top:0,opacity:1},300);else d?(d=!1,e>=p&&e>=n?a.getPrev():e<=-p&&e<=n&&a.getNext()):g.hasClass("visible-bars")?(a.clearTimeout(),a.hideBars()):(a.showBars(),a.setTimeout());i("#swipebox-slider").css({"-webkit-transform":"translate3d("+w+"%, 0, 0)",transform:"translate3d("+w+"%, 0, 0)"}),i("#swipebox-overlay").removeClass("leftSpringTouch").removeClass("rightSpringTouch"),i(".touching").off("touchmove").removeClass("touching")})},setTimeout:function(){if(d.settings.hideBarsDelay>0){var e=this;e.clearTimeout(),e.timeout=t.setTimeout(function(){e.hideBars()},d.settings.hideBarsDelay)}},clearTimeout:function(){t.clearTimeout(this.timeout),this.timeout=null},showBars:function(){var t=i("#swipebox-top-bar, #swipebox-bottom-bar");this.doCssTrans()?t.addClass("visible-bars"):(i("#swipebox-top-bar").animate({top:0},500),i("#swipebox-bottom-bar").animate({bottom:0},500),setTimeout(function(){t.addClass("visible-bars")},1e3))},hideBars:function(){var t=i("#swipebox-top-bar, #swipebox-bottom-bar");this.doCssTrans()?t.removeClass("visible-bars"):(i("#swipebox-top-bar").animate({top:"-50px"},500),i("#swipebox-bottom-bar").animate({bottom:"-50px"},500),setTimeout(function(){t.removeClass("visible-bars")},1e3))},animBars:function(){var t=this,e=i("#swipebox-top-bar, #swipebox-bottom-bar");e.addClass("visible-bars"),t.setTimeout(),i("#swipebox-slider").click(function(){e.hasClass("visible-bars")||(t.showBars(),t.setTimeout())}),i("#swipebox-bottom-bar").hover(function(){t.showBars(),e.addClass("visible-bars"),t.clearTimeout()},function(){d.settings.hideBarsDelay>0&&(e.removeClass("visible-bars"),t.setTimeout())})},keyboard:function(){var e=this;i(t).bind("keyup",function(t){t.preventDefault(),t.stopPropagation(),37===t.keyCode?e.getPrev():39===t.keyCode?e.getNext():27===t.keyCode&&e.closeSlide()})},actions:function(){var t=this,e="touchend click";c.length<2?(i("#swipebox-bottom-bar").hide(),o===c[1]&&i("#swipebox-top-bar").hide()):(i("#swipebox-prev").bind(e,function(e){e.preventDefault(),e.stopPropagation(),t.getPrev(),t.setTimeout()}),i("#swipebox-next").bind(e,function(e){e.preventDefault(),e.stopPropagation(),t.getNext(),t.setTimeout()})),i("#swipebox-close").bind(e,function(){t.closeSlide()})},setSlide:function(t,e){e=e||!1;var o=i("#swipebox-slider");w=100*-t,this.doCssTrans()?o.css({"-webkit-transform":"translate3d("+100*-t+"%, 0, 0)",transform:"translate3d("+100*-t+"%, 0, 0)"}):o.animate({left:100*-t+"%"}),i("#swipebox-slider .slide").removeClass("current"),i("#swipebox-slider .slide").eq(t).addClass("current"),this.setTitle(t),e&&o.fadeIn(),i("#swipebox-prev, #swipebox-next").removeClass("disabled"),0===t?i("#swipebox-prev").addClass("disabled"):t===c.length-1&&d.settings.loopAtEnd!==!0&&i("#swipebox-next").addClass("disabled")},openSlide:function(e){i("html").addClass("swipebox-html"),u?(i("html").addClass("swipebox-touch"),d.settings.hideCloseButtonOnMobile&&i("html").addClass("swipebox-no-close-button")):i("html").addClass("swipebox-no-touch"),i(t).trigger("resize"),this.setSlide(e,!0)},preloadMedia:function(t){var e=this,i=null;c[t]!==o&&(i=c[t].href),e.isVideo(i)?e.openMedia(t):setTimeout(function(){e.openMedia(t)},1e3)},openMedia:function(t){var e,n,s=this;return c[t]!==o&&(e=c[t].href),!(t<0||t>=c.length)&&(n=i("#swipebox-slider .slide").eq(t),void(s.isVideo(e)?(n.html(s.getVideo(e)),d.settings.afterMedia&&d.settings.afterMedia(t)):(n.addClass("slide-loading"),s.loadMedia(e,function(){n.removeClass("slide-loading"),n.html(this),d.settings.afterMedia&&d.settings.afterMedia(t)}))))},setTitle:function(t){var e=null;i("#swipebox-title").empty(),c[t]!==o&&(e=c[t].title),e?(i("#swipebox-top-bar").show(),i("#swipebox-title").append(e)):i("#swipebox-top-bar").hide()},isVideo:function(t){if(t){if(t.match(/(youtube\.com|youtube-nocookie\.com)\/watch\?v=([a-zA-Z0-9\-_]+)/)||t.match(/vimeo\.com\/([0-9]*)/)||t.match(/youtu\.be\/([a-zA-Z0-9\-_]+)/))return!0;if(t.toLowerCase().indexOf("swipeboxvideo=1")>=0)return!0}},parseUri:function(t,o){var n=e.createElement("a"),s={};return n.href=decodeURIComponent(t),n.search&&(s=JSON.parse('{"'+n.search.toLowerCase().replace("?","").replace(/&/g,'","').replace(/=/g,'":"')+'"}')),i.isPlainObject(o)&&(s=i.extend(s,o,d.settings.queryStringData)),i.map(s,function(t,e){if(t&&t>"")return encodeURIComponent(e)+"="+encodeURIComponent(t)}).join("&")},getVideo:function(t){var e="",i=t.match(/((?:www\.)?youtube\.com|(?:www\.)?youtube-nocookie\.com)\/watch\?v=([a-zA-Z0-9\-_]+)/),o=t.match(/(?:www\.)?youtu\.be\/([a-zA-Z0-9\-_]+)/),n=t.match(/(?:www\.)?vimeo\.com\/([0-9]*)/),s="";return i||o?(o&&(i=o),s=r.parseUri(t,{autoplay:d.settings.autoplayVideos?"1":"0",v:""}),e='<iframe width="560" height="315" src="//'+i[1]+"/embed/"+i[2]+"?"+s+'" frameborder="0" allowfullscreen></iframe>'):n?(s=r.parseUri(t,{autoplay:d.settings.autoplayVideos?"1":"0",byline:"0",portrait:"0",color:d.settings.vimeoColor}),e='<iframe width="560" height="315"  src="//player.vimeo.com/video/'+n[1]+"?"+s+'" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>'):e='<iframe width="560" height="315" src="'+t+'" frameborder="0" allowfullscreen></iframe>','<div class="swipebox-video-container" style="max-width:'+d.settings.videoMaxWidth+'px"><div class="swipebox-video">'+e+"</div></div>"},loadMedia:function(t,e){if(0===t.trim().indexOf("#"))e.call(i("<div>",{"class":"swipebox-inline-container"}).append(i(t).clone().toggleClass(d.settings.toggleClassOnLoad)));else if(!this.isVideo(t)){var o=i("<img>").on("load",function(){e.call(o)});o.attr("src",t)}},getNext:function(){var t,e=this,o=i("#swipebox-slider .slide").index(i("#swipebox-slider .slide.current"));o+1<c.length?(t=i("#swipebox-slider .slide").eq(o).contents().find("iframe").attr("src"),i("#swipebox-slider .slide").eq(o).contents().find("iframe").attr("src",t),o++,e.setSlide(o),e.preloadMedia(o+1),d.settings.nextSlide&&d.settings.nextSlide(o)):d.settings.loopAtEnd===!0?(t=i("#swipebox-slider .slide").eq(o).contents().find("iframe").attr("src"),i("#swipebox-slider .slide").eq(o).contents().find("iframe").attr("src",t),o=0,e.preloadMedia(o),e.setSlide(o),e.preloadMedia(o+1),d.settings.nextSlide&&d.settings.nextSlide(o)):(i("#swipebox-overlay").addClass("rightSpring"),setTimeout(function(){i("#swipebox-overlay").removeClass("rightSpring")},500))},getPrev:function(){var t,e=i("#swipebox-slider .slide").index(i("#swipebox-slider .slide.current"));e>0?(t=i("#swipebox-slider .slide").eq(e).contents().find("iframe").attr("src"),i("#swipebox-slider .slide").eq(e).contents().find("iframe").attr("src",t),e--,this.setSlide(e),this.preloadMedia(e-1),d.settings.prevSlide&&d.settings.prevSlide(e)):(i("#swipebox-overlay").addClass("leftSpring"),setTimeout(function(){i("#swipebox-overlay").removeClass("leftSpring")},500))},nextSlide:function(t){},prevSlide:function(t){},closeSlide:function(){i("html").removeClass("swipebox-html"),i("html").removeClass("swipebox-touch"),i(t).trigger("resize"),this.destroy()},destroy:function(){i(t).unbind("keyup"),i("body").unbind("touchstart"),i("body").unbind("touchmove"),i("body").unbind("touchend"),i("#swipebox-slider").unbind(),i("#swipebox-overlay").remove(),i.isArray(n)||n.removeData("_swipebox"),this.target&&this.target.trigger("swipebox-destroy"),i.swipebox.isOpen=!1,d.settings.afterClose&&d.settings.afterClose()}},d.init()},i.fn.swipebox=function(t){if(!i.data(this,"_swipebox")){var e=new i.swipebox(this,t);this.data("_swipebox",e)}return this.data("_swipebox")}}(window,document,jQuery);